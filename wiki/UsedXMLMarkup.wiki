#summary Popis použitých XML značek.

= Introduction =

Seznam XML značek použitých v projetu a jejich specifikace tak, jak jsou uvedeny v XML schématu.


= Details =

==Element {{{<game>}}}

Kořenovým atributem každého herního souboru je párová značka {{{<game>}}}, která uzavírá každý herní scénář. Samotná značka je v XSD definována takto:
{{{
    <xsd:element name="game" type="gameType">
        <xsd:unique name="sceneUnique">
            <xsd:selector xpath="./scene"/>
            <xsd:field xpath="./@id"/>
        </xsd:unique>
    </xsd:element>
}}}

Jak je z definice značky patrné, má typ gameType a jejími potomky jsou scény, které mají unikátní scene id. Samotný *gameType* má následující XSD definici:
{{{
    <xsd:complexType name="gameType">
        <xsd:sequence>
            <xsd:element name="scene" type="sceneType" minOccurs="2" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="name" type="nonEmptyString" use="required"/>
        <xsd:attribute name="startingScene" type="xsd:positiveInteger" use="required"/>
    </xsd:complexType>
}}}

Jinými slovy každá hra má jako atributy své jméno, které slouží pro její identifikaci, a informaci o id startovní scény. Jméno hry je také po dobu, kdy je hra načtená v aplikaci, zobrazeno v záhlaví jako název okna.
Nastavení id startovní scény je nastaveno proto, aby v případě složitějších scénářů, které například zahrnují více lokací s desítkami provázaných scén, měl autor větší volnost volby. Uvažme například, že je hra tvořena více lokacemi, z nichž každá má více scén a i když hráč mezi nimi může procházet, autor hry chce, aby bylo jasné která lokace má které scény. Pak může id scén chtít nastavit například na XXYYY, kde XX je kód lokace a YYY kód scény. První scéna pak může nést číslo 1001.


==Element {{{<scene}}}==

Je párová značka, použitá pro zobrazení jednotlivých scén v příběhu. Vlastní definice tohoto elementu v XSD je následující:
{{{
<xsd:element name="scene" type="sceneType" minOccurs="2" maxOccurs="unbounded"/>
}}}

Každá hra tedy musí obsahovat minimálně dvě scény - startovní a konečnou. Maximální počet scén není omezen. Každá scéna musí mít své jméno, které je při běhu programu zobrazeno v záhlaví, nad jejím obsahem. Scéna je definována svým vlastním typem sceneType, který vypadá takto:
{{{
   <xsd:complexType name="sceneType">
        <xsd:sequence>
            <xsd:element name="name" type="nonEmptyString" minOccurs="1" maxOccurs="1"/>
            <xsd:element name="description" type="xsd:string" minOccurs="1" maxOccurs="1"/>
            <xsd:element name="choices" type="choicesType" minOccurs="1" maxOccurs="1"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:positiveInteger" use="required"/>
    </xsd:complexType>
}}}
Scéna tedy má poměrně pevně danou strukturu. Jejím jediným atributem je atribut id, který slouží jako identifikační číslo scény a je vyžadovaný. Tento fakt program při načítání hry sám validuje.
Každá scéna pak musí obsahovat jméno, které je definováno uživatelským typem nonEmptyString, popis, uzavřený v párové značce {{{<description>}}}, který se uživateli zobrazí v hlavním dialogovém okně programu jako informace o samotné scéně. Poslední částí scény je {{{<choices>}}} element, který obsahuje volby, které uživatel v dané scéně může udělat. Ten je definován pomocí uživatelského typu {{{<choicesType>}}}.